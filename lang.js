// lang.js

// 1. Translations Object (Full Content Version)
const translations = {
  // English Translations
  en: {
    metaTitle: "Kunlun Growth - Your Partner in the Diamond Supply Chain",
    metaDescription: "Kunlun Growth: Your Strategic Partner in the Global Lab-Grown Diamond Supply Chain.",
    navHome: "Home",
    navSolutions: "Our Solutions",
    navAbout: "About Us",
    navContact: "Contact Us",
    heroTitle: "Kunlun Growth: Your Strategic Partner in the Global Lab-Grown Diamond Supply Chain.",
    heroSubtitle: "Sourcing certainty from the origin, delivering value across the globe.",
    btnRough: "For Rough Diamond Partners (Plan A)",
    btnPolished: "For Polished Diamond Clients (Plan B)",
    aboutTitle: "About Us",
    founderTitle: "Founder's Profile: Marshall Lee",
    founderDesc: "Marshall Lee is the founder of Kunlun Growth, a lab-grown diamond industry expert deeply rooted in China and connected globally. With years of in-depth experience in China's source supply chain, Marshall has a profound insight into the production, technological iteration, and market dynamics of HPHT lab-grown diamonds. He not only understands the strengths and challenges of Chinese manufacturers but also possesses a broad global perspective, accurately grasping the needs of the Indian diamond processing center and the pulse of the North American consumer market. This unique cross-cultural and cross-market professional background enables him to build an efficient, transparent, and reliable bridge for you, maximizing the value of the supply chain.",
    missionTitle: "Our Mission",
    missionDesc: "In a period of transformative reshaping of the global lab-grown diamond industry chain, the market is facing unprecedented uncertainty and opportunities. The mission of Kunlun Growth is to become the key node connecting the East and the West. We are committed to providing stable, high-value supply chain solutions for our global partners through professional supply chain management, strict quality control, and deep market insight. We believe that through precise matching and in-depth service, we can help our partners avoid risks, seize opportunities, and grow together.",
    solutionsTitle: "Our Solutions",
    solutionATitle: "Supply Chain Integration (For Rough Diamond Manufacturers)",
    solutionATarget: "For clients in India",
    solutionASubtitle: "Stability, Traceability, High Quality: Your 'Safe Harbor' in Times of Supply Chain Chaos.",
    solutionA1: "<strong>Stable Supply Guarantee:</strong> We have established long-term strategic partnerships with top HPHT producers in China, ensuring you receive a continuous and predictable supply of rough diamonds, ending worries about raw material shortages.",
    solutionA2: "<strong>Strict Traceability:</strong> Every batch of rough diamonds we provide comes with a clear record of origin, offering solid confidence to you and your clients in a market that increasingly emphasizes supply chain transparency.",
    solutionA3: "<strong>Excellent Crystal Quality:</strong> We specialize in HPHT technology and select only rough diamonds with superior crystal morphology and fewer inclusions, boosting your yield and profit margin from the source.",
    solutionA4: "<strong>Strategic Risk Hedging:</strong> Partnering with Kunlun Growth means you have a reliable 'Supply Chain Plan B,' effectively hedging against geopolitical and market volatility risks to keep your production lines running.",
    solutionBTitle: "Direct Sales of Polished Diamonds (For Jewelry Brands & Wholesalers)",
    solutionBTarget: "For clients in North America",
    solutionBSubtitle: "Local Quality Control, Concierge Service: Easy Sourcing, Better Prices.",
    solutionB1: "<strong>On-Site Quality Control:</strong> Our team in China performs strict quality inspections to ensure every diamond—from color and clarity to cut and fluorescence—meets your order requirements 100%. What you order is what you get.",
    solutionB2: "<strong>Concierge Service:</strong> We offer a full-process 'concierge' service from sourcing, inspection, logistics, to customs clearance. Simply state your needs, and we handle all the tedious intermediate steps, allowing you to focus on your market and sales.",
    solutionB3: "<strong>Highly Competitive Pricing:</strong> By integrating the supply chain, we eliminate unnecessary middlemen, passing the cost advantages of Chinese manufacturing directly to you, giving you a stronger price advantage in the North American market.",
    solutionB4: "<strong>Seamless Communication:</strong> Our team, based in North America, communicates with you without time differences or language barriers, deeply understanding your business needs and market culture.",
    contactTitle: "Contact Us",
    contactSubtitle: "We look forward to exploring partnership opportunities with you. Please fill out the form below or contact us directly.",
    formName: "Name",
    formCompany: "Company Name",
    formEmail: "Email",
    formService: "Service of Interest",
    formServiceRough: "Supply Chain Integration (Rough)",
    formServicePolished: "Direct Sales (Polished)",
    formServiceOther: "Other",
    formMessage: "Message",
    formSubmit: "Submit",
    contactInfoTitle: "Contact Information",
    contactInfoEmail: "Corporate Email:",
    contactInfoSocial: "Social Network:",
    footerText: "© 2025 Kunlun Growth. All Rights Reserved."
  },
  // Hindi Translations (Full Content)
  hi: {
    metaTitle: "कुनलुन ग्रोथ - डायमंड सप्लाई चेन में आपका पार्टनर",
    metaDescription: "कुनलुन ग्रोथ: वैश्विक लैब-निर्मित डायमंड सप्लाई चेन में आपका रणनीतिक साझेदार।",
    navHome: "होम",
    navSolutions: "हमारे समाधान",
    navAbout: "हमारे बारे में",
    navContact: "संपर्क करें",
    heroTitle: "कुनलुन ग्रोथ: वैश्विक लैब-निर्मित डायमंड सप्लाई चेन में आपका रणनीतिक साझेदार।",
    heroSubtitle: "स्रोत से निश्चितता, दुनिया भर में मूल्य प्रदान करना।",
    btnRough: "रफ डायमंड पार्टनर्स के लिए (प्लान ए)",
    btnPolished: "पॉलिश्ड डायमंड ग्राहकों के लिए (प्लान बी)",
    aboutTitle: "हमारे बारे में",
    founderTitle: "संस्थापक की प्रोफाइल: मार्शल ली",
    founderDesc: "मार्शल ली कुनलुन ग्रोथ के संस्थापक हैं, जो चीन में गहराई से जुड़े और विश्व स्तर पर जुड़े एक लैब-निर्मित डायमंड उद्योग विशेषज्ञ हैं। चीन की स्रोत आपूर्ति श्रृंखला में वर्षों के गहरे अनुभव के साथ, मार्शल को एचपीएचटी लैब-निर्मित डायमंड के उत्पादन, तकनीकी पुनरावृत्ति और बाजार की गतिशीलता की गहरी समझ है। वह न केवल चीनी निर्माताओं की ताकत और चुनौतियों को समझते हैं, बल्कि एक व्यापक वैश्विक दृष्टिकोण भी रखते हैं, जो भारतीय हीरा प्रसंस्करण केंद्र की जरूरतों और उत्तरी अमेरिकी उपभोक्ता बाजार की नब्ज को सटीक रूप से समझते हैं। यह अनूठी क्रॉस-सांस्कृतिक और क्रॉस-मार्केट पेशेवर पृष्ठभूमि उन्हें आपके लिए एक कुशल, पारदर्शी और विश्वसनीय पुल बनाने में सक्षम बनाती है, जिससे आपूर्ति श्रृंखला का मूल्य अधिकतम होता है।",
    missionTitle: "हमारा मिशन",
    missionDesc: "वैश्विक लैब-निर्मित डायमंड उद्योग श्रृंखला के परिवर्तनकारी पुनर्रचना की अवधि में, बाजार अभूतपूर्व अनिश्चितता और अवसरों का सामना कर रहा है। कुनलुन ग्रोथ का मिशन पूर्व और पश्चिम को जोड़ने वाला प्रमुख नोड बनना है। हम पेशेवर आपूर्ति श्रृंखला प्रबंधन, सख्त गुणवत्ता नियंत्रण और गहरी बाजार अंतर्दृष्टि के माध्यम से अपने वैश्विक भागीदारों के लिए स्थिर, उच्च-मूल्य वाले आपूर्ति श्रृंखला समाधान प्रदान करने के लिए प्रतिबद्ध हैं। हमें विश्वास है कि सटीक मिलान और गहन सेवा के माध्यम से, हम अपने भागीदारों को जोखिमों से बचने, अवसरों का लाभ उठाने और एक साथ बढ़ने में मदद कर सकते हैं।",
    solutionsTitle: "हमारे समाधान",
    solutionATitle: "आपूर्ति श्रृंखला एकीकरण (रफ डायमंड निर्माताओं के लिए)",
    solutionATarget: "भारत में ग्राहकों के लिए",
    solutionASubtitle: "स्थिरता, पता लगाने की क्षमता, उच्च गुणवत्ता: आपूर्ति श्रृंखला अराजकता के समय में आपका 'सुरक्षित बंदरगाह'।",
    solutionA1: "<strong>स्थिर आपूर्ति गारंटी:</strong> हमने चीन में शीर्ष एचपीएचटी उत्पादकों के साथ दीर्घकालिक रणनीतिक साझेदारी स्थापित की है, जिससे आपको कच्चे माल की कमी की चिंता किए बिना रफ डायमंड की निरंतर और अनुमानित आपूर्ति सुनिश्चित होती है।",
    solutionA2: "<strong>सख्त पता लगाने की क्षमता:</strong> हमारे द्वारा प्रदान किए गए रफ डायमंड के प्रत्येक बैच में मूल का एक स्पष्ट रिकॉर्ड होता है, जो आपको और आपके ग्राहकों को एक ऐसे बाजार में ठोस विश्वास प्रदान करता है जो आपूर्ति श्रृंखला पारदर्शिता पर तेजी से जोर देता है।",
    solutionA3: "<strong>उत्कृष्ट क्रिस्टल गुणवत्ता:</strong> हम एचपीएचटी तकनीक में विशेषज्ञ हैं और केवल बेहतर क्रिस्टल आकारिकी और कम समावेश वाले रफ डायमंड का चयन करते हैं, जिससे स्रोत से आपकी उपज और लाभ मार्जिन बढ़ता है।",
    solutionA4: "<strong>रणनीतिक जोखिम हेजिंग:</strong> कुनलुन ग्रोथ के साथ साझेदारी का मतलब है कि आपके पास एक विश्वसनीय 'आपूर्ति श्रृंखला प्लान बी' है, जो आपकी उत्पादन लाइनों को चालू रखने के लिए भू-राजनीतिक और बाजार की अस्थिरता के जोखिमों को प्रभावी ढंग से हेज करता है।",
    solutionBTitle: "पॉलिश्ड डायमंड की सीधी बिक्री (ज्वेलरी ब्रांड और थोक विक्रेताओं के लिए)",
    solutionBTarget: "उत्तरी अमेरिका में ग्राहकों के लिए",
    solutionBSubtitle: "स्थानीय गुणवत्ता नियंत्रण, कंसीयज सेवा: आसान सोर्सिंग, बेहतर कीमतें।",
    solutionB1: "<strong>ऑन-साइट गुणवत्ता नियंत्रण:</strong> चीन में हमारी टीम यह सुनिश्चित करने के लिए सख्त गुणवत्ता निरीक्षण करती है कि प्रत्येक हीरा—रंग और स्पष्टता से लेकर कट और प्रतिदीप्ति तक—आपके ऑर्डर की आवश्यकताओं को 100% पूरा करता है। जो आप ऑर्डर करते हैं, वही आपको मिलता है।",
    solutionB2: "<strong>कंसीयज सेवा:</strong> हम सोर्सिंग, निरीक्षण, लॉजिस्टिक्स से लेकर सीमा शुल्क निकासी तक की पूरी प्रक्रिया 'कंसीयज' सेवा प्रदान करते हैं। बस अपनी जरूरतें बताएं, और हम सभी थकाऊ मध्यवर्ती कदमों को संभालते हैं, जिससे आप अपने बाजार और बिक्री पर ध्यान केंद्रित कर सकते हैं।",
    solutionB3: "<strong>अत्यधिक प्रतिस्पर्धी मूल्य निर्धारण:</strong> आपूर्ति श्रृंखला को एकीकृत करके, हम अनावश्यक बिचौलियों को खत्म करते हैं, जिससे चीनी विनिर्माण के लागत लाभ सीधे आपको मिलते हैं, और आपको उत्तरी अमेरिकी बाजार में एक मजबूत मूल्य लाभ मिलता है।",
    solutionB4: "<strong>निर्बाध संचार:</strong> उत्तरी अमेरिका में स्थित हमारी टीम, समय के अंतर या भाषा की बाधाओं के बिना आपसे संवाद करती है, आपकी व्यावसायिक जरूरतों और बाजार संस्कृति को गहराई से समझती है।",
    contactTitle: "संपर्क करें",
    contactSubtitle: "हम आपके साथ साझेदारी के अवसरों का पता लगाने के लिए उत्सुक हैं। कृपया नीचे दिया गया फॉर्म भरें या हमसे सीधे संपर्क करें।",
    formName: "नाम",
    formCompany: "कंपनी का नाम",
    formEmail: "ईमेल",
    formService: "रुचि की सेवा",
    formServiceRough: "आपूर्ति श्रृंखला एकीकरण (रफ)",
    formServicePolished: "सीधी बिक्री (पॉलिश्ड)",
    formServiceOther: "अन्य",
    formMessage: "संदेश",
    formSubmit: "सबमिट करें",
    contactInfoTitle: "संपर्क जानकारी",
    contactInfoEmail: "कॉर्पोरेट ईमेल:",
    contactInfoSocial: "सामाजिक नेटवर्क:",
    footerText: "© 2025 कुनलुन ग्रोथ। सर्वाधिकार सुरक्षित।"
  },
  // Chinese Translations (Full Content)
  zh: {
    metaTitle: "昆仑成长 - 您在钻石供应链中的合作伙伴",
    metaDescription: "昆仑成长：您在全球培育钻石供应链中的战略合作伙伴。",
    navHome: "首页",
    navSolutions: "我们的解决方案",
    navAbout: "关于我们",
    navContact: "联系我们",
    heroTitle: "Kunlun Growth: 您在全球培育钻石供应链中的战略合作伙伴。",
    heroSubtitle: "源头采购的确定性，全球价值的交付者。",
    btnRough: "致毛坯钻石合作伙伴 (A计划)",
    btnPolished: "致成品钻石客户 (B计划)",
    aboutTitle: "关于我们",
    founderTitle: "创始人简介: Marshall Lee",
    founderDesc: "Marshall Lee 是 Kunlun Growth 的创始人，一位深植于中国，链接全球的培育钻石行业专家。凭借多年在中国源头供应链的深耕经验，Marshall 对HPHT培育钻石的生产、技术迭代和市场动态拥有深刻的洞察。他不仅理解中国制造商的优势与挑战，更具备广阔的全球视野，精准把握印度钻石加工中心的需求以及北美消费市场的脉搏。这种独特的跨文化、跨市场的专业背景，使他能够为您搭建起一座高效、透明且可靠的桥梁，将供应链的价值最大化。",
    missionTitle: "公司使命",
    missionDesc: "在全球培育钻石产业链经历重塑的变革时期，市场面临着前所未有的不确定性与机遇。Kunlun Growth 的使命，是成为连接东方与西方的关键节点。我们致力于通过专业的供应链管理、严格的品质控制和深刻的市场洞察，为全球合作伙伴提供稳定、高价值的供应链解决方案。我们相信，通过精准的匹配和深度的服务，我们可以帮助合作伙伴规避风险，抓住机遇，共同成长。",
    solutionsTitle: "我们的解决方案",
    solutionATitle: "供应链整合 (服务毛坯钻石制造商)",
    solutionATarget: "专门针对印度客户",
    solutionASubtitle: "稳定、可追溯、高品质：您在供应链混乱时期的“安全港”。",
    solutionA1: "<strong>稳定的供应保障:</strong> 我们与中国顶尖的HPHT生产商建立了长期战略合作关系，确保您能获得持续、可预测的毛坯供应，不再为原料短缺而烦恼。",
    solutionA2: "<strong>严格的可追溯性:</strong> 我们提供的每一批毛坯都具备清晰的来源记录，在日益强调供应链透明度的市场中，这为您和您的客户提供了坚实的信心保证。",
    solutionA3: "<strong>卓越的晶体品质:</strong> 我们精通HPHT技术，只为您筛选出晶体形态优良、瑕疵少、适合高质量切割的毛坯，从源头提升您的成品率和利润空间。",
    solutionA4: "<strong>战略风险对冲:</strong> 将 Kunlun Growth 作为您的战略采购伙伴，意味着您拥有了一个可靠的“供应链B计划”，有效对冲地缘政治和市场波动带来的风险，确保您的生产线持续运转。",
    solutionBTitle: "成品直销 (服务珠宝品牌和批发商)",
    solutionBTarget: "专门针对北美客户",
    solutionBSubtitle: "在地品控，管家服务：轻松采购，价格更优。",
    solutionB1: "<strong>在地品控:</strong> 我们的团队在中国源头为您执行严格的品质检验。从颜色、净度、切工到荧光，我们确保每一颗钻石都100%符合您的订单要求。您收到的，就是您想要的。",
    solutionB2: "<strong>管家式服务:</strong> 我们提供从采购、检验、物流到清关的全流程“管家式”服务。您只需提出需求，我们负责处理所有繁琐的中间环节，让您能专注于市场和销售。",
    solutionB3: "<strong>极具竞争力的价格:</strong> 通过整合供应链，我们剔除了不必要的中间商环节，将中国制造的成本优势直接传递给您，让您在北美市场获得更强的价格竞争力。",
    solutionB4: "<strong>无缝的沟通体验:</strong> 我们的团队立足北美，与您无时差、无障碍沟通，深刻理解您的商业需求和市场文化。",
    contactTitle: "联系我们",
    contactSubtitle: "我们期待与您探讨合作机会。请填写下面的表单，或通过其他方式直接与我们联系。",
    formName: "姓名 (Name)",
    formCompany: "公司名称 (Company Name)",
    formEmail: "邮箱 (Email)",
    formService: "您感兴趣的服务 (Service of Interest)",
    formServiceRough: "供应链整合 (毛坯钻石)",
    formServicePolished: "成品直销 (成品钻石)",
    formServiceOther: "其他 (Other)",
    formMessage: "留言 (Message)",
    formSubmit: "提交",
    contactInfoTitle: "联系信息",
    contactInfoEmail: "企业邮箱:",
    contactInfoSocial: "社交网络:",
    footerText: "© 2025 Kunlun Growth. 版权所有。"
  },
  // Japanese Translations (Full Content)
  ja: {
    metaTitle: "クンルン・グロース - ダイヤモンドサプライチェーンのパートナー",
    metaDescription: "クンルン・グロース：グローバルなラボグロウンダイヤモンドサプライチェーンにおける戦略的パートナー。",
    navHome: "ホーム",
    navSolutions: "ソリューション",
    navAbout: "会社概要",
    navContact: "お問い合わせ",
    heroTitle: "クンルン・グロース：グローバルなラボグロウンダイヤモンドサプライチェーンにおける戦略的パートナー。",
    heroSubtitle: "供給元からの確実な調達、世界中に価値を提供。",
    btnRough: "原石パートナー様へ (プランA)",
    btnPolished: "研磨済みダイヤモンドのお客様へ (プランB)",
    aboutTitle: "会社概要",
    founderTitle: "創設者紹介: マーシャル・リー",
    founderDesc: "マーシャル・リーはクンルン・グロースの創設者であり、中国に深く根ざし、世界と繋がるラボグロウンダイヤモンド業界の専門家です。中国の供給元サプライチェーンにおける長年の深い経験により、マーシャルはHPHTラボグロウンダイヤモンドの生産、技術の反復、市場の動向について深い洞察を持っています。彼は中国の製造業者の強みと課題を理解するだけでなく、広いグローバルな視点を持ち、インドのダイヤモンド加工センターのニーズと北米の消費者市場の動向を正確に把握しています。このユニークな異文化・異市場の専門的背景により、彼はあなたのために効率的で透明性があり、信頼性の高い架け橋を築き、サプライチェーンの価値を最大化することができます。",
    missionTitle: "私たちの使命",
    missionDesc: "グローバルなラボグロウンダイヤモンド産業チェーンが変革的な再編を遂げる時期に、市場は前例のない不確実性と機会に直面しています。クンルン・グロースの使命は、東洋と西洋を結ぶ重要な結節点となることです。私たちは、専門的なサプライチェーン管理、厳格な品質管理、深い市場洞察を通じて、グローバルなパートナーに安定的で高価値のサプライチェーンソリューションを提供することに尽力しています。正確なマッチングと深いサービスを通じて、パートナーがリスクを回避し、機会を掴み、共に成長するのを助けることができると信じています。",
    solutionsTitle: "私たちのソリューション",
    solutionATitle: "サプライチェーン統合 (原石ダイヤモンドメーカー向け)",
    solutionATarget: "インドのお客様向け",
    solutionASubtitle: "安定性、追跡可能性、高品質：サプライチェーンの混乱時におけるあなたの「安全な港」。",
    solutionA1: "<strong>安定した供給保証:</strong> 私たちは中国のトップHPHT生産者と長期的な戦略的パートナーシップを確立し、原材料不足の心配なく、原石ダイヤモンドの継続的で予測可能な供給を保証します。",
    solutionA2: "<strong>厳格な追跡可能性:</strong> 私たちが提供するすべての原石ダイヤモンドのバッチには、明確な原産地の記録が付属しており、サプライチェーンの透明性がますます重視される市場で、あなたとあなたのクライアントに確固たる信頼を提供します。",
    solutionA3: "<strong>優れた結晶品質:</strong> 私たちはHPHT技術に特化し、優れた結晶形態と少ない内包物を持つ原石ダイヤモンドのみを選択し、供給元からあなたの歩留まりと利益率を高めます。",
    solutionA4: "<strong>戦略的リスクヘッジ:</strong> クンルン・グロースとの提携は、信頼性の高い「サプライチェーンプランB」を持つことを意味し、地政学的および市場の変動リスクを効果的にヘッジして、生産ラインの稼働を維持します。",
    solutionBTitle: "研磨済みダイヤモンドの直接販売 (ジュエリーブランド＆卸売業者向け)",
    solutionBTarget: "北米のお客様向け",
    solutionBSubtitle: "現地での品質管理、コンシェルジュサービス：簡単な調達、より良い価格。",
    solutionB1: "<strong>現地での品質管理:</strong> 中国の私たちのチームは、すべてのダイヤモンドが—色や透明度からカットや蛍光まで—あなたの注文要件を100%満たすように、厳格な品質検査を実施します。注文したものがそのまま届きます。",
    solutionB2: "<strong>コンシェルジュサービス:</strong> 私たちは、調達、検査、物流から通関までの全プロセスを「コンシェルジュ」サービスとして提供します。あなたのニーズを伝えるだけで、私たちはすべての面倒な中間ステップを処理し、あなたが市場と販売に集中できるようにします。",
    solutionB3: "<strong>非常に競争力のある価格設定:</strong> サプライチェーンを統合することにより、不要な中間業者を排除し、中国製造のコスト優位性を直接あなたに提供し、北米市場での価格競争力を強化します。",
    solutionB4: "<strong>シームレスなコミュニケーション:</strong> 北米に拠点を置く私たちのチームは、時差や言語の障壁なくあなたとコミュニケーションをとり、あなたのビジネスニーズと市場文化を深く理解します。",
    contactTitle: "お問い合わせ",
    contactSubtitle: "私たちはあなたとのパートナーシップの機会を探ることを楽しみにしています。以下のフォームに記入するか、直接お問い合わせください。",
    formName: "名前",
    formCompany: "会社名",
    formEmail: "Eメール",
    formService: "興味のあるサービス",
    formServiceRough: "サプライチェーン統合 (原石)",
    formServicePolished: "直接販売 (研磨済み)",
    formServiceOther: "その他",
    formMessage: "メッセージ",
    formSubmit: "送信",
    contactInfoTitle: "連絡先情報",
    contactInfoEmail: "会社のEメール:",
    contactInfoSocial: "ソーシャルネットワーク:",
    footerText: "© 2025 クンルン・グロース。全著作権所有。"
  }
};

// 2. Language Detection and Switching Logic
document.addEventListener('DOMContentLoaded', () => {
  const languageSwitcher = document.querySelector('.language-switcher');
  const langLinks = languageSwitcher.querySelectorAll('a');
  const supportedLangs = ['en', 'hi', 'zh', 'ja'];
  let currentLang;

  const setLanguage = (lang) => {
    // Check if the language is supported, default to 'en' if not
    if (!supportedLangs.includes(lang)) {
      lang = 'en'; 
    }
    
    document.documentElement.setAttribute('lang', lang);

    document.querySelectorAll('[data-key]').forEach(element => {
      const key = element.getAttribute('data-key');
      // A robust check to prevent errors if a key is missing in the future
      if (translations[lang] && translations[lang][key]) {
        element.innerHTML = translations[lang][key];
      }
    });
    
    langLinks.forEach(link => {
      link.classList.toggle('active-lang', link.getAttribute('lang') === lang);
    });

    localStorage.setItem('language', lang);
    currentLang = lang;
  };

  languageSwitcher.addEventListener('click', (e) => {
    e.preventDefault();
    const lang = e.target.getAttribute('lang');
    if (lang && lang !== currentLang) {
      setLanguage(lang);
    }
  });

  // Initial language detection logic
  const savedLang = localStorage.getItem('language');
  const browserLang = navigator.language.slice(0, 2);

  if (savedLang && supportedLangs.includes(savedLang)) {
    setLanguage(savedLang);
  } else if (supportedLangs.includes(browserLang)) {
    setLanguage(browserLang);
  } else {
    setLanguage('en');
  }
});
